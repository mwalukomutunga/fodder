(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{7652:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return a(8682)}])},1050:function(e,s,a){"use strict";var t=a(9669),l=a.n(t);l().defaults.baseURL="http://localhost:7065/api",l().defaults.headers.common.Authorization="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiQWRtaW4iLCJBZG1pbiI6IkFkbWluIiwiZXhwIjoxNjM3OTQ2MzY4LCJpc3MiOiJEaWdpZmFybSIsImF1ZCI6IlNhZmFyaWNvbSJ9.KSbNsJ7x0sIzafEo2q-vQGPYUNXZ-jQKEQ-76FLe3aU",l().defaults.headers.post["Content-Type"]="application/json",l().defaults.headers.post["Content-Type"]="multipart/form-data";var n=function(e){return e.data},c={get:function(e){return l().get(e).then(n)},post:function(e,s){var a=void 0===s?{}:s;return l().post(e,a).then(n)},put:function(e,s){var a=void 0===s?{}:s;return l().put(e,a).then(n)},del:function(e){return l().delete(e).then(n)}};s.Z=c},8682:function(e,s,a){"use strict";a.r(s);var t=a(5893),l=a(7294),n=a(3299),c=a(9473),r=a(1163),i=a(8486),d=a(1664),o=a(1050);function m(e,s,a){return s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function u(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{},t=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),t.forEach((function(s){m(e,s,a[s])}))}return e}s.default=function(){var e=(0,l.useState)({}),s=e[0],a=e[1],h=(0,l.useState)(),x=h[0],p=h[1],b=(0,n.useSession)(),j=b.data,N=(b.status,(0,r.useRouter)()),f=(0,c.v9)((function(e){return e.cart})),v=(0,c.I0)();(0,l.useEffect)((function(){o.Z.get("location/"+(null===j||void 0===j?void 0:j.user.name)).then((function(e){a(e)})),p((function(e){return u({},e,{name:null===j||void 0===j?void 0:j.user.name,phone:null===j||void 0===j?void 0:j.user.name})}))}),[j]);var g=f.reduce((function(e,s){return s.unitPrice*s.quantity+e}),0),y=f.reduce((function(e,s){return e+s.unitPrice*((100-s.discount)/100)*s.quantity}),0);j||(0,n.signIn)();var w=function(){o.Z.put("Address",x).then((function(e){a(e),N.reload()}))},k=function(e){e.persist();var s=e.target,a="checkbox"===s.type?s.checked:s.value,t=s.name;p((function(e){return u({},e,m({},t,a))}))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("section",{className:"py-4 osahan-main-body",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-lg-8",children:(0,t.jsxs)("div",{className:"accordion",id:"accordionExample",children:[(0,t.jsxs)("div",{className:"card border-0 osahan-accor rounded shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"card-header bg-white border-0 p-0",id:"headingOne",children:(0,t.jsx)("h2",{className:"mb-0",children:(0,t.jsxs)("button",{className:"btn d-flex align-items-center bg-white btn-block text-left btn-lg h5 px-3 py-4 m-0",type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:[(0,t.jsx)("span",{className:"c-number",children:"1"})," Cart (",f.length," ","items)"]})})}),(0,t.jsx)("div",{id:"collapseOne",className:"collapse show","aria-labelledby":"headingOne","data-parent":"#accordionExample",children:(0,t.jsx)("div",{className:"card-body p-0 border-top",children:(0,t.jsxs)("div",{className:"osahan-cart",children:[f.map((function(e,s){var a;return(0,t.jsxs)("div",{className:"cart-items bg-white position-relative border-bottom",children:[(0,t.jsx)("a",{className:"position-absolute",children:(0,t.jsxs)("span",{className:"badge badge-danger m-3",children:[e.discount,"%"]})}),(0,t.jsxs)("div",{className:"d-flex align-items-center p-3",children:[(0,t.jsx)("a",{children:(0,t.jsx)("img",{src:e.paths[0],className:"img-fluid"})}),(0,t.jsxs)("a",{className:"ml-3 text-dark text-decoration-none w-100",children:[(0,t.jsxs)("h5",{className:"mb-1",children:[e.county,"-",e.subCounty,"-",e.ward]}),(0,t.jsxs)("p",{className:"text-muted mb-2",children:[(0,t.jsxs)("del",{className:"text-success mr-1",children:[" ",e.unitPrice]}),e.unitPrice*((100-e.discount)/100),"/="]}),(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsxs)("p",{className:"total_price font-weight-bold m-0",children:[e.address,(0,t.jsx)("hr",{}),"Seller - ",null===j||void 0===j?void 0:j.user.name," ",(0,t.jsx)("br",{}),"Free transport:"," ",e.freeTransport.toString()]}),(0,t.jsxs)("form",{className:"cart-items-number d-flex ml-auto",children:[(0,t.jsx)("input",{type:"button",value:"-",className:"qtyminus btn btn-success btn-sm",field:"quantity",onClick:function(){return v((0,i.X1)(e.id))}}),(0,t.jsx)("input",{type:"text",name:"quantity",value:null===(a=f.find((function(s){return s.id==e.id})))||void 0===a?void 0:a.quantity,className:"qty form-control"}),(0,t.jsx)("input",{type:"button",value:"+",className:"qtyplus btn btn-success btn-sm",field:"quantity",onClick:function(){return v((0,i.g1)(e.id))}})]})]})]})]})]},s)})),(0,t.jsx)("div",{children:(0,t.jsx)("a",{href:"cart.html#",className:"text-decoration-none btn btn-block p-3",type:"button","data-toggle":"collapse","data-target":"#collapsetwo","aria-expanded":"true","aria-controls":"collapsetwo",children:(0,t.jsxs)("div",{className:"rounded shadow bg-success d-flex align-items-center p-3 text-white",children:[(0,t.jsxs)("div",{className:"more",children:[(0,t.jsxs)("h6",{className:"m-0",children:["Subtotal ksh ",g]}),(0,t.jsx)("p",{className:"small m-0",children:"Proceed to checkout"})]}),(0,t.jsx)("div",{className:"ml-auto",children:(0,t.jsx)("i",{className:"icofont-simple-right"})})]})})})]})})})]}),(0,t.jsxs)("div",{className:"card border-0 osahan-accor rounded shadow-sm overflow-hidden mt-3",children:[(0,t.jsx)("div",{className:"card-header bg-white border-0 p-0",id:"headingtwo",children:(0,t.jsx)("h2",{className:"mb-0",children:(0,t.jsxs)("button",{className:"btn d-flex align-items-center bg-white btn-block text-left btn-lg h5 px-3 py-4 m-0",type:"button","data-toggle":"collapse","data-target":"#collapsetwo","aria-expanded":"true","aria-controls":"collapsetwo",children:[(0,t.jsx)("span",{className:"c-number",children:"2"})," Order Address"," ",(0,t.jsxs)("a",{href:"cart.html#","data-toggle":"modal","data-target":"#exampleModal",className:"text-decoration-none text-success ml-auto",children:[" ",(0,t.jsx)("i",{className:"icofont-plus-circle mr-1"}),"Add New Delivery Address"]})]})})}),(0,t.jsx)("div",{id:"collapsetwo",className:"collapse","aria-labelledby":"headingtwo","data-parent":"#accordionExample",children:s&&(0,t.jsx)("div",{className:"card-body p-0 border-top",children:(0,t.jsx)("div",{className:"osahan-order_address",children:(0,t.jsxs)("div",{className:"p-3 row",children:[(0,t.jsx)("div",{className:"custom-control col-lg-12 custom-radio mb-6 position-relative border-custom-radio",children:(0,t.jsxs)("div",{className:"p-3 bg-white rounded shadow-sm w-200",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,t.jsx)("p",{className:"mb-0 h6",children:"Home"}),(0,t.jsxs)("p",{className:"mb-0 badge badge-success ml-auto",children:[(0,t.jsx)("i",{className:"icofont-check-circled"})," ","Default"]})]}),(0,t.jsx)("p",{className:"small text-muted m-0",children:null===s||void 0===s?void 0:s.homeAddress}),(0,t.jsx)("p",{className:"small text-muted m-0",children:null===s||void 0===s?void 0:s.completeAddress}),(0,t.jsx)("p",{className:"pt-2 m-0 text-right",children:(0,t.jsx)("span",{className:"small",children:(0,t.jsx)("a",{href:"cart.html#","data-toggle":"modal","data-target":"#exampleModal",className:"text-decoration-none text-info",children:"Edit"})})})]})}),(0,t.jsx)(d.default,{href:"/success",children:(0,t.jsx)("a",{className:"btn btn-success btn-lg btn-block mt-3",type:"button","data-toggle":"collapse","data-target":"#collapsethree","aria-expanded":"true","aria-controls":"collapsethree",children:"Place order"})})]})})})})]})]})}),(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsx)("div",{className:"sticky_sidebar",children:(0,t.jsxs)("div",{className:"bg-white rounded overflow-hidden shadow-sm mb-3 checkout-sidebar",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center osahan-cart-item-profile border-bottom bg-white p-3",children:[(0,t.jsx)("img",{alt:"osahan",src:"/img/FPSK LOGO.jpg",className:"mr-3 rounded-circle img-fluid"}),(0,t.jsxs)("div",{className:"d-flex flex-column",children:[(0,t.jsx)("h6",{className:"mb-1 font-weight-bold",children:null===j||void 0===j?void 0:j.user.name}),(0,t.jsxs)("p",{className:"mb-0 small text-muted",children:[(0,t.jsx)("i",{className:"feather-map-pin"}),null===j||void 0===j?void 0:j.user.email]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"bg-white p-3 clearfix",children:[(0,t.jsx)("p",{className:"font-weight-bold small mb-2",children:"Bill Details"}),(0,t.jsxs)("p",{className:"mb-1",children:["Item Total"," ",(0,t.jsxs)("span",{className:"small text-muted",children:["(",f.length," item (s))"]})," ",(0,t.jsxs)("span",{className:"float-right text-dark",children:["ksh ",g]})]}),(0,t.jsxs)("h6",{className:"mb-0 text-success",children:["Total Discount",(0,t.jsxs)("span",{className:"float-right text-success",children:["ksh ",g-y]})]})]}),(0,t.jsx)("div",{className:"p-3 border-top",children:(0,t.jsxs)("h5",{className:"mb-0",children:["TO PAY"," ",(0,t.jsxs)("span",{className:"float-right text-danger",children:["ksh ",y]})]})})]})]})})})]})})}),(0,t.jsx)("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,t.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Add Delivery Address"}),(0,t.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,t.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,t.jsx)("div",{className:"modal-body",children:(0,t.jsx)("form",{onSubmit:w,children:(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"col-md-12 form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Delivery Area"}),(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("input",{placeholder:"Delivery Area",type:"text",name:"homeAddress",onChange:k,className:"form-control"}),(0,t.jsx)("div",{className:"input-group-append",children:(0,t.jsx)("button",{id:"button-addon2",type:"button",className:"btn btn-outline-secondary",children:(0,t.jsx)("i",{className:"icofont-pin"})})})]})]}),(0,t.jsxs)("div",{className:"col-md-12 form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Complete Address"}),(0,t.jsx)("input",{placeholder:"Complete Address e.g. house number, street name, landmark",type:"text",name:"completeAddress",onChange:k,className:"form-control"})]}),(0,t.jsxs)("div",{className:"col-md-12 form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Delivery Instructions"}),(0,t.jsx)("input",{name:"deliveryInstructions",onChange:k,placeholder:"Delivery Instructions e.g. Opposite Gold Souk Mall",type:"text",className:"form-control"})]})]})})}),(0,t.jsxs)("div",{className:"modal-footer p-0 border-0",children:[(0,t.jsx)("div",{className:"col-6 m-0 p-0",children:(0,t.jsx)("button",{type:"button",className:"btn border-top btn-lg btn-block","data-dismiss":"modal",children:"Close"})}),(0,t.jsx)("div",{className:"col-6 m-0 p-0",children:(0,t.jsx)("button",{onClick:function(){return w()},type:"button",className:"btn btn-success btn-lg btn-block",children:"Save changes"})})]})]})})})]})}},1163:function(e,s,a){e.exports=a(387)}},function(e){e.O(0,[669,774,888,179],(function(){return s=7652,e(e.s=s);var s}));var s=e.O();_N_E=s}]);